/**

	MySQL database dump that will define basic schema for the Project Collaboration App.
	Author: Kekin Chheda
	Created Date: 26 May 2020
*/

CREATE TABLE Profile (
	id INT(6) UNSIGNED AUTO_INCREMENT PRIMARY KEY,
	firstname VARCHAR(30) NOT NULL,
	lastname VARCHAR(30) NOT NULL,
	email VARCHAR(50),
	reg_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
)


CREATE TABLE Projects (
    ProjectID int NOT NULL,
    Manager int,
    Name VARCHAR(15),
    PRIMARY KEY (ProjectID),
    FOREIGN KEY (Manager) REFERENCES Profile(id)
);

CREATE TABLE Comments (
    CommentID int NOT NULL,
    AuthorID int,
    CommentStr VARCHAR(100),
    PRIMARY KEY (CommentID),
    FOREIGN KEY (AuthorID) REFERENCES Profile(id)
);

CREATE TABLE UserStory (
    StoryID int NOT NULL,
    AuthorID int,
    Assignee int,
    Title VARCHAR(100),
    PRIMARY KEY (StoryID),
    FOREIGN KEY (AuthorID) REFERENCES Profile(id),
    FOREIGN KEY (Assignee) REFERENCES Profile(id)
);

CREATE TABLE Task (
    TaskID int NOT NULL,
    StoryID int,
    Assignee int,
    Title VARCHAR(100),
    PRIMARY KEY (TaskID),
    FOREIGN KEY (StoryID) REFERENCES UserStory(StoryID),
    FOREIGN KEY (Assignee) REFERENCES Profile(id)
);



